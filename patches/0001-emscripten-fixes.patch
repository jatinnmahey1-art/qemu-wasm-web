diff --git a/configure b/configure
index e69de29..d95f3a9 100755
--- a/configure
+++ b/configure
@@ -1,3 +1,18 @@
 #!/bin/sh
 # QEMU configure script (generated by configure)
 
+# EMSCRIPTEN: Force riscv64-softmmu and disable incompatible features
+if echo "$CC" | grep -q emcc || echo "$CXX" | grep -q em++; then
+    echo "Emscripten detected - forcing riscv64-softmmu"
+    target_list="riscv64-softmmu $target_list"
+    pie="no"
+    kvm="no"
+    xen="no"
+    hax="no"
+    hvf="no"
+    whpx="no"
+    nvmm="no"
+    linux_user="no"
+    bsd_user="no"
+    guest_agent="no"
+fi
+
 # Default configuration
 softmmu="yes"
 linux_user="yes"
diff --git a/util/glib-compat.c b/util/glib-compat.c
index e69de29..a1b2c3d 100644
--- a/util/glib-compat.c
+++ b/util/glib-compat.c
@@ -1,3 +1,12 @@
 #include "qemu/osdep.h"
 #include "qemu/glib-compat.h"
 
+#ifdef __EMSCRIPTEN__
+#define g_thread_supported() (1)
+#define g_thread_init(x) do { } while (0)
+static inline void *g_thread_new(const gchar *name, void *func, void *data) {
+    return NULL;
+}
+#endif
+
 void qemu_init_main_loop(void)
 {
     if (!g_thread_supported()) {
